(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function c(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(e){if(e.ep)return;e.ep=!0;const t=c(e);fetch(e.href,t)}})();const r=document.getElementById("input_video"),n=document.getElementById("overlay"),a=n.getContext("2d"),d=new window.FaceMesh({locateFile:i=>`https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${i}`});d.setOptions({maxNumFaces:1,refineLandmarks:!0,minDetectionConfidence:.6,minTrackingConfidence:.5});d.onResults(i=>{if(a.clearRect(0,0,n.width,n.height),i.multiFaceLandmarks&&i.multiFaceLandmarks.length>0)for(const o of i.multiFaceLandmarks)for(const c of o)a.beginPath(),a.arc(c.x*n.width,c.y*n.height,2,0,2*Math.PI),a.fillStyle="red",a.fill()});async function m(){try{const i=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}});r.srcObject=i,await r.play(),n.width=r.videoWidth,n.height=r.videoHeight,new window.Camera(r,{onFrame:async()=>{r.readyState>=2&&await d.send({image:r})},width:r.videoWidth,height:r.videoHeight,facingMode:"user"}).start()}catch(i){console.error("Błąd uruchamiania kamery:",i),alert("Nie udało się uruchomić kamery. Sprawdź uprawnienia i HTTPS.")}}m();
