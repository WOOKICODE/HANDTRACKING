(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function a(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(t){if(t.ep)return;t.ep=!0;const n=a(t);fetch(t.href,n)}})();const y=document.getElementById("input_video"),o=document.getElementById("overlay"),s=o.getContext("2d");let r=[];const M=.2,v=8,S=4,I=30;let f=200,h=100;const L=120,P=120;let u=!1,H=0,C=0;function N(c,i,a){return c+(i-c)*a}function _(){const c=new Hands({locateFile:a=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${a}`});c.setOptions({maxNumHands:2,modelComplexity:1,minDetectionConfidence:.7,minTrackingConfidence:.5}),c.onResults(B),new Camera(y,{onFrame:async()=>await c.send({image:y}),width:640,height:480}).start()}function B(c){if(o.width=y.clientWidth,o.height=y.clientHeight,s.clearRect(0,0,o.width,o.height),s.fillStyle="red",s.fillRect(f,h,L,P),!c.multiHandLandmarks){u=!1;return}const i=c.multiHandLandmarks[0];if(!i)return;r[0]||(r[0]=i.map(e=>({x:e.x,y:e.y})));for(let e=0;e<i.length;e++)r[0][e].x=N(r[0][e].x,i[e].x,M),r[0][e].y=N(r[0][e].y,i[e].y,M);const a=r[0][v],l=r[0][S],t=(1-a.x)*o.width,n=a.y*o.height,d=(1-l.x)*o.width,O=l.y*o.height,x=Math.hypot(t-d,n-O),E=t>f&&t<f+L&&n>h&&n<h+P;!u&&E&&x<=I&&(u=!0,H=t-f,C=n-h),u&&(f=t-H,h=n-C,x>I&&(u=!1));const p=performance.now()*.002,T=Math.floor(128+127*Math.sin(p)),D=Math.floor(128+127*Math.sin(p+2)),F=Math.floor(128+127*Math.sin(p+4)),b=`rgb(${T},${D},${F})`;for(let e=0;e<i.length;e++){const m=r[0][e],g=e===v?12:8;s.beginPath(),s.arc((1-m.x)*o.width,m.y*o.height,g,0,2*Math.PI),s.fillStyle=b,s.fill()}const R=[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[0,9],[9,10],[10,11],[11,12],[0,13],[13,14],[14,15],[15,16],[0,17],[17,18],[18,19],[19,20]];s.strokeStyle=b,s.lineWidth=2;for(const[e,m]of R){const g=r[0][e],w=r[0][m];s.beginPath(),s.moveTo((1-g.x)*o.width,g.y*o.height),s.lineTo((1-w.x)*o.width,w.y*o.height),s.stroke()}}document.addEventListener("DOMContentLoaded",_);
